<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>My WebApp</title>
    <link rel="icon" href="static/images/heart.png">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='style.css') }}">
  </head>
  <body>
    <header>
      <nav>
        <ul>
          <li><a href="{{ url_for('index') }}">Home</a></li>
          <li><a href="{{ url_for('about_app') }}">About App</a></li>
          <li><a href="{{ url_for('did_you_know') }}">Did you know</a></li>
          <li><a href="{{ url_for('about_author') }}">About Author</a></li>
        </ul>
      </nav>
    </header>
    <main>
      <div class="aboutApp">
        <h1>About this application</h1>
        <br>
        <p style="color:white">Here is the picture of workflow used to build and deploy this application. Feel free to click on any part of the workflow you are interested in, to find out more.</p>
        <img src="static/images/AppWorkFlow.png" usemap="#imagemap" alt="Workflow">
        <map name="imagemap">
          <area shape="rect" coords="260,110,430,350" data-info="GitHub repository" onclick="aboutGitHub()">
          <area shape="rect" coords="50,168,110,280" data-info="Developer" onclick="aboutDeveloper()">
          <area shape="rect" coords="615,133,773,340" data-info="Jenkins" onclick="aboutJenkins()">
          <area shape="rect" coords="1018,172,1191,290" data-info="Application" onclick="aboutApplication()">
          <area shape="rect" coords="195,376,508,403" data-info="Go to GitHub repo" onclick="window.open('https://github.com/marijaaab/master_rad','_blank')">
          <area shape="rect" coords="615,376,797,403" data-info="Go to Jenkins server" onclick="window.open('http://localhost:8000','_blank')">
          <area shape="rect" coords="1018,376,1201,403" data-info="Go to Application" onclick="window.open('http://localhost:8001','_blank')">
        </map>
        <div id="tooltip"></div>
      </div>
    </main>
    <script>
      function aboutGitHub() {
        alert("This is a GitHub repository which contains all the source code of the application, as well as the Dockerfile and Jenkinsfile.");
      }
      function aboutDeveloper() {
        alert("This is a developer. He is working on a code and when he is happy with the changes he made, he pushes his code to the GitHub repository.");
      }
      function aboutJenkins() {
        alert("This is a Jenkins server, hosted inside the Docker container. You can visit this server by accessing http://localhost:8000. This is where the code is automatically built on each push to the GitHub repo. After the code is built, the application is deployed inside another Docker container on local machine.");
      }
      function aboutApplication() {
        alert("This is your application hosted using Flask server inside the Docker container. You can see the content of your web application by accessing http://localhost:8001");
      }
      const areas = document.getElementsByTagName('area');
      const tooltip = document.getElementById('tooltip');

      for (let i = 0; i < areas.length; i++) {
        areas[i].addEventListener('mouseover', function(e) {
          const info = e.target.dataset.info;
          tooltip.textContent = info;
          tooltip.style.display = 'block';
          tooltip.style.top = e.pageY + 'px';
          tooltip.style.left = e.pageX + 'px';
        });

        areas[i].addEventListener('mouseout', function(e) {
          tooltip.style.display = 'none';
        });
      }
    </script>
  </body>
</html>
